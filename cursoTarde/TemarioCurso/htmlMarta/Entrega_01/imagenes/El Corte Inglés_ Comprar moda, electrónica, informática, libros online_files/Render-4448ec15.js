import{as as ce,o as D,g as F,at as je,N as O,au as Ne,av as Bt,a3 as Tt,z as M,h as X,I as Le,aw as Pe,A as Ft,c as q,i as Ut,j as Z,F as ae,x as Vt,E as jt,k as re,ab as ee,r as le,n as Nt,$ as $t,u as de,Q as ue,a8 as qt,ax as Ee,f as z,a as Ae}from"./vuex.esm-bundler-f8eff60d.js";import{c as J,m as De}from"./state-0c727e5f.js";import{_ as Ht}from"./_plugin-vue_export-helper-c27b6911.js";function $e(e,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const a in o)if(a!=="default"&&!(a in e)){const r=Object.getOwnPropertyDescriptor(o,a);r&&Object.defineProperty(e,a,r.get?r:{enumerable:!0,get:()=>o[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const Wt="modulepreload",zt=function(e,t){return e[0]==="."?new URL(e,t).href:e},xe={},B=function(t,n,o){if(!n||n.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=zt(r,o),r in xe)return;xe[r]=!0;const i=r.endsWith(".css"),c=i?'[rel="stylesheet"]':"";if(!!o)for(let _=a.length-1;_>=0;_--){const f=a[_];if(f.href===r&&(!i||f.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(r,'"]').concat(c)))return;const l=document.createElement("link");if(l.rel=i?"stylesheet":Wt,i||(l.as="script",l.crossOrigin=""),l.href=r,document.head.appendChild(l),i)return new Promise((_,f)=>{l.addEventListener("load",_),l.addEventListener("error",()=>f(new Error("Unable to preload CSS for ".concat(r))))})})).then(()=>t()).catch(r=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=r,window.dispatchEvent(i),!i.defaultPrevented)throw r})},Jt=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Gt=Object.freeze(Object.defineProperty({__proto__:null,isEqual:Jt},Symbol.toStringTag,{value:"Module"})),qe=ce(Gt),Yt=e=>e!=null&&typeof e[Symbol.iterator]=="function",Kt=(e,t)=>{if(Yt(e))return e.filter((n,o)=>(e==null?void 0:e.findIndex(a=>t(n,a)))===o)},Qt=Object.freeze(Object.defineProperty({__proto__:null,uniqWith:Kt},Symbol.toStringTag,{value:"Module"})),He=ce(Qt),{isEqual:Xt}=qe,{uniqWith:Zt}=He,en=(e,t=null,n=!1)=>{let o=[];const a=Array.from(e.querySelectorAll("span.dataholder[data-scope='promotion'][data-hasnav='true']"));return a.length&&(o=a.map(function(r,i){var c=r.closest("div.image-overlay-out")||r.closest("div.non-overlay-out")||r.closest("div.image-overlay-in")||r.closest("div.non-overlay-in")||r.closest("div.composition-container"),s=!0,l=JSON.parse(r.getAttribute("data-json"));if(!(n&&t&&!t.includes(l.id))&&!(!n&&t&&t.includes(l.id))){var _=r.closest("div.composition-container[data-dmp_segments]");if(_){var f=_.getAttribute("data-dmp_segments"),C=f.split(","),g=["kxelcorteinglessa_allsegs","kxelcorteinglessa_segs"],u=!1;g.forEach(function(S){var w=window.localStorage.getItem(S);!u&&w&&C.forEach(function(d){w.indexOf(d)!==-1&&(u=!0)})}),s=u}else c&&window.getComputedStyle(c).display==="none"&&(s=!1);if(s)if(l){var k={id:l.id,name:l.name,pos:l.position,creative:l.creative},A=r.nextElementSibling;return A&&tn(A,k),l.is_carousel&&(k=nn(r,k)),(l.creative==="canvas"||l.creative==="multipurpose")&&(k=We(r,k)),k}else console.warn("loadPromotions:: No se ha especificado data-json para la promocion["+i+"]")}}).filter(function(r){return r||void 0})),Zt(o,Xt)},tn=(e,t)=>{var n={event:"promotion_click",promotion:t};e.tagName.toLocaleLowerCase()!=="a"&&(e=e.querySelector("a")),e&&(e.getAttribute("href")!==null||e.getAttribute("href")!=="")&&e.addEventListener("click",function(){window.dataLayer.push(n)})},We=(e,t)=>{var n=e.closest(".artwork.canvas");if(!n)return t;var o="none";if(n.classList.contains("small")){var a=window.getComputedStyle(n).display;if(a!=="none"){var r=e.closest("div:not(.links-set)");o=window.getComputedStyle(r).display}}else o=window.getComputedStyle(n).display;if(o!=="none")return t},nn=function(e,t){const n=window.matchMedia("screen and (max-width: 996px)").matches,a=e.closest("ul.carousel-artworks-wrapper").getBoundingClientRect(),i=e.closest("li.artwork.artwork-multilayer").getBoundingClientRect(),c=e.closest("div.artwork"),s=window.getComputedStyle(c).display,l=Math.floor(a.right-i.left),_=n?40:0;if(i.left>=a.left&&l>_&&s!=="none")return t};var on={buildSimplePromos:en,handleCanvas:We};const an=e=>{var t=0;function n(d){return a(o(r(d)))}function o(d){return c(S(i(d),d.length*8))}function a(d){try{}catch(R){t=0}for(var h=t?"0123456789ABCDEF":"0123456789abcdef",m="",y,P=0;P<d.length;P++)y=d.charCodeAt(P),m+=h.charAt(y>>>4&15)+h.charAt(y&15);return m}function r(d){for(var h="",m=-1,y,P;++m<d.length;)y=d.charCodeAt(m),P=m+1<d.length?d.charCodeAt(m+1):0,55296<=y&&y<=56319&&56320<=P&&P<=57343&&(y=65536+((y&1023)<<10)+(P&1023),m++),y<=127?h+=String.fromCharCode(y):y<=2047?h+=String.fromCharCode(192|y>>>6&31,128|y&63):y<=65535?h+=String.fromCharCode(224|y>>>12&15,128|y>>>6&63,128|y&63):y<=2097151&&(h+=String.fromCharCode(240|y>>>18&7,128|y>>>12&63,128|y>>>6&63,128|y&63));return h}function i(d){for(var h=Array(d.length>>2),m=0;m<h.length;m++)h[m]=0;for(var m=0;m<d.length*8;m+=8)h[m>>5]|=(d.charCodeAt(m/8)&255)<<24-m%32;return h}function c(d){for(var h="",m=0;m<d.length*32;m+=8)h+=String.fromCharCode(d[m>>5]>>>24-m%32&255);return h}function s(d,h){return d>>>h|d<<32-h}function l(d,h){return d>>>h}function _(d,h,m){return d&h^~d&m}function f(d,h,m){return d&h^d&m^h&m}function C(d){return s(d,2)^s(d,13)^s(d,22)}function g(d){return s(d,6)^s(d,11)^s(d,25)}function u(d){return s(d,7)^s(d,18)^l(d,3)}function k(d){return s(d,17)^s(d,19)^l(d,10)}var A=new Array(1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998);function S(d,h){var m=new Array(1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225),y=new Array(64),P,R,U,Y,V,H,N,K,W,x,Q,oe;for(d[h>>5]|=128<<24-h%32,d[(h+64>>9<<4)+15]=h,W=0;W<d.length;W+=16){for(P=m[0],R=m[1],U=m[2],Y=m[3],V=m[4],H=m[5],N=m[6],K=m[7],x=0;x<64;x++)x<16?y[x]=d[x+W]:y[x]=w(w(w(k(y[x-2]),y[x-7]),u(y[x-15])),y[x-16]),Q=w(w(w(w(K,g(V)),_(V,H,N)),A[x]),y[x]),oe=w(C(P),f(P,R,U)),K=N,N=H,H=V,V=w(Y,Q),Y=U,U=R,R=P,P=w(Q,oe);m[0]=w(P,m[0]),m[1]=w(R,m[1]),m[2]=w(U,m[2]),m[3]=w(Y,m[3]),m[4]=w(V,m[4]),m[5]=w(H,m[5]),m[6]=w(N,m[6]),m[7]=w(K,m[7])}return m}function w(d,h){var m=(d&65535)+(h&65535),y=(d>>16)+(h>>16)+(m>>16);return y<<16|m&65535}return n(e)},rn=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"})),sn=ce(rn),me=sn,{uniqWith:ze}=He,{isEqual:Je}=qe,cn=on,fe=20,ln=Object.freeze({MODULE_VUE:"productModuleVue",MODULE_WPC:"productModuleWpc",MODULE_ECI:"productModuleEci",MODULE_SIA:"productModuleSia",WISHLIST:"productWishlist",MULTIPLE_ADD_TO_CART:"productMultipleAddToCart"}),he=Object.freeze({BUY_LOOK:"Compra el look",SIMILAR_PRODUCTS:"PRODUCTOS_SIMILARES",CROSS_SELLING:"PRODUCTOS RELACIONADOS",NOTIFY_ME:"Avísame"}),Ge=Object.freeze({COPY_URL:"copied_link",SHARED_MOBILE:"shared_mobile",UTM_MEDIUM:"shared_referral",UTM_CAMPAIGN:"shared_referral_"});function dn(e,t){t==="PLUS"?ve(e):_n(e)}function un(e){const t=window.dataLayer.filter(o=>o.event=="product_module_push_rm").length,n={system_event:!0,event:"product_module_push_rm",index_pushed:t,...e};n["product_modules_rm_".concat(t)]=[e.product],delete n.product,window.dataLayer.push(n)}function fn(e){const t={system_event:!0,event:"rm_click",rm_product_click:e.product,...e};delete t.product,window.dataLayer.push(t)}function ve(e,t,n,o){e.quantity>1&&ge(e,e.quantity-1),ye(e,t,n,o)}function mn(e,t,n,o){return a=>{if(!(a!=null&&a.ok)){_e(!1);return}ve(e,t,n,o),_e(!0)}}function _e(e){const t={category:"add to cart debug",action:"add to cart intent ".concat(e?"OK":"KO")};v(t)}function _n(e){ge(e,e.quantity+1),ye(e)}function ye(e,t,n,o){var _,f,C,g,u,k,A,S,w;var a={};let r="",i=!1;window.dataLayer&&window.dataLayer.length>0&&(e.page_type=(f=(_=window.dataLayer[0])==null?void 0:_.page)==null?void 0:f.type,Bo(e),r=((g=(C=window.dataLayer[0].page)==null?void 0:C.hierarchy)==null?void 0:g.join("/"))||"",i=(u=window.location.pathname)==null?void 0:u.includes("search-nwx")),i&&(t="new-search-experience");const c=window.dataLayer.filter(d=>d.event==="add_to_cart_serps_ai").length+1,s=window.dataLayer.filter(d=>d.event==="add_to_cart_art").length+1,l=((S=(A=(k=window.dataLayer[0])==null?void 0:k.page)==null?void 0:A.hierarchy)==null?void 0:S.join("/"))||[];switch(t){case"cdp-carousel":e.vendor="art::"+l+"::Te recomendamos",a={event:"add_to_cart_art",index_pushed:s,["art_product_"+s]:JSON.parse(JSON.stringify(e))};break;case"chatbox":e.vendor="serps_ai::".concat(r,"::chatbot"),e.parent_id="chatID>".concat(o),a={event:"add_to_cart_serps_ai",index_pushed:c,["serps_ai_product_"+c]:JSON.parse(JSON.stringify(e))};break;case"vue":a={event:"add_to_cart_vue",index_pushed:n||1,["vue_product_"+n]:JSON.parse(JSON.stringify(e))};break;case"wpc":a={event:"add_to_cart_wpc",index_pushed:n||1,["wpc_product_"+n]:{...e,vendor:(w=e.vendor)==null?void 0:w.replace("eci::","wpc::")}};break;case"rich_relevance":a={event:"add_to_cart_rr",index_pushed:n||1,["rr_product_"+n]:e};break;case"product_store":a=pn(e);break;case"new-search-experience":e.vendor="SERPS/"+l,a={event:"add_to_cart",product:e};break;case"sia":a={event:"add_to_cart_sia",index_pushed:n||1,["sia_product_"+(n||1)]:JSON.parse(JSON.stringify(e))};break;case"retail_media":a={system_event:!0,event:"add_to_cart_rm",index_pushed:n||1,...e},a["rm_product_".concat(n)]=e.product,delete a.product;break;default:a={event:"add_to_cart",product:e};break}window.dataLayer.push(a)}function pn(e){const o=(window.dataLayer||[]).filter(function(r){return r.event&&r.event==="add_to_cart_eci"}).length+1,a={event:"add_to_cart_eci",system_event:!0,index_pushed:o};return a["eci_product_"+o]=e,a}function Ye(e,t){const n=t?t+1:1,o={event:"add_to_cart_multi",index_pushed:n,["products_".concat(n)]:e};return window.dataLayer.push(o),n}function ge(e,t){const n={event:"remove_from_cart",product:{...e,quantity:t}};window.dataLayer.push(n)}function Ke(e,t){var c,s,l;let n=!1;var o="",a="";let r="";switch(e.product_store_datalayer&&(e=e.product_store_datalayer,t="product_module"),window.dataLayer&&window.dataLayer.length>0?(r=window.dataLayer[0].page.hierarchy.join("/"),n=(c=window.location.pathname)==null?void 0:c.includes("search-nwx")):r="",n&&(t="new-search-experience"),t){case"cdp-carousel":e.vendor="art::"+r+"::Te recomendamos",o="art_click",a="art_product_click";break;case"vue":o="vue_click",a="vue_product_click";break;case"wpc":o="wpc_click",a="wpc_product_click",e.vendor=(s=e.vendor)==null?void 0:s.replace("eci::","wpc::");break;case"sia":o="sia_click",a="sia_product_click",e.vendor=(l=e.vendor)==null?void 0:l.replace("eci::","sia::");break;case"product_module":o="eci_click",a="eci_product_click";break;case"new-search-experience":e.vendor="SERPS/"+r,o="product_click",a="product";break;default:o="product_click",a="product";break}const i={system_event:!0,event:o,[a]:JSON.parse(JSON.stringify(e))};window.dataLayer.push(i)}function hn(e,t,n=!1){n?nt(e):Ke(e,t)}function vn(e,t,n,o="PRODUCTOS_SIMILARES",a=!0){var g,u;if(!Array.isArray(e)||!e.length)return;const r=e.map(k=>({...k})),i=4;let c="",s="",l;switch(t){case"rr":c="product_module_push_rr",s="product_modules_rr_",l="rr";break;case"vue":c="product_module_push_vue",s="product_modules_vue_";break;case"wpc":c="product_module_push_wpc",s="product_modules_wpc_",l="wpc";break;case"sia":c="product_module_push_sia",s="product_modules_sia_",l="sia";break;default:c="product_module_push_eci",s="product_modules_eci_",l="eci";break}let _=n?n+1:1;o===he.BUY_LOOK&&(l="eci");const f=Math.ceil(r.length/i);for(var C=1;C<=f;){const k="".concat(s).concat(_),A={system_event:!0,event:c,index_pushed:_,[k]:[]};for(const[S,w]of r.entries())if(S>=(C-1)*i&&S<=C*i-1&&w){if(w.position=S+1,a){const d="".concat(l,"::").concat((g=w.category)==null?void 0:g.join("/"),"::").concat(o);t!=="vue"&&t!=="sia"&&(w.vendor=d)}A[k].push(w)}(u=window.dataLayer)==null||u.push(A),_+=1,C+=1}return C-1}function yn(e){const t={event:"cart_show",products:e&&e.length&&e.map(n=>n.data_layer)||[]};window.dataLayer.push(t)}function gn(e,t,n="wishlist"){const o=t?t+1:1,a={system_event:!0,event:"add_to_wishlist",wishlist_type:n,index_pushed:o,["product_"+o]:e};return window.dataLayer.push(a),o}function wn(e){const t={};t.postal_code=e.zipCode,t.cookies=e.cookiesPolicy,t.registered=!!e.id,t.atg_id=e.atg_id||void 0,t.id=e.id||void 0,t.sp_id=e.id?me(e.id):void 0,t.email=e.email?me(e.email):void 0,t.flat_rate=e.flatRate,t.loyalty=!!e.loyaltyPoints;const n={event:"user_push",user:t};window.dataLayer&&window.dataLayer.push(n)}function Cn(e,t,n){var a=1;const r=Math.ceil(e.length/10);for(;a<=r;){const i="products_".concat(t),c=(a-1)*10,s=a*10,l=n&&n.length&&n.slice(c,s)||bn(e.slice(c,s)),_={event:"products_push",index_pushed:t,[i]:l.map(f=>({...f}))};window.dataLayer.push(_),t+=1,a+=1}return t}function kn(){const e={event:"reload"};window.dataLayer.push(e)}function bn(e){if(e)return e.map((t,n)=>Qe(t,n+1))}const Sn=e=>{var t,n;if(e){if(e.gtin)return e.gtin;if((t=e.variants)!=null&&t.length)return e.variants[0].gtin;if((n=e._my_colors)!=null&&n.length&&e._my_colors[0].variants.length)return e._my_colors[0].variants[0].gtin}};function Qe(e,t){var s;const n="EUR";let o;const a=e._my_colors&&e._my_colors[0];e._selected_skus&&e._selected_skus[0]?o=e._selected_skus[0]:a?o=a:o={};const r=(s=o.variants)==null?void 0:s[0],i={},c=(e.brand||{}).name;if(e.provider_type==="MKP"&&(a!=null&&a.sale_price&&!e.sale_price&&(e.sale_price=a.sale_price),a!=null&&a.discount&&!e.discount&&(e.discount=a.discount),a!=null&&a.status&&!e._status&&(e._status=a.status)),i.id=e.group_type!=="SINGLE"?e.id:Ln(o,e.marketplace),i.gtin=Sn(o),i.status=e._status,i.variant=o?o.id||(r==null?void 0:r.id):void 0,i.store_id=e.store_id,i.name=e.title,i.brand=c,i.position=t,i.badges=e._badges,i.price=Xe(e.price||o.price||(r==null?void 0:r.price),e.sale_price||o.true_price||(r==null?void 0:r.sale_price),e.discount||(r==null?void 0:r.discount),n),i.media={},i.category=Pn(e.categories),i.code_a=e.id,i.eci_provider=e.provider_name||"El Corte Inglés",i.hierarchy=e.hierarchy,i.quantity=1,i.media=En(e),i.group_by=Ze(e),o.hasVendor){const l=e.hierarchy.join("/");i.vendor="eci::"+l+"::PRODUCTOS RELACIONADOS"}return!i.vendor&&e.vendor&&(i.vendor=e.vendor),i}function Ln(e,t){return!e||!e.id?"Invalid data received":t?e.id:e.id.substring(0,15)}function Xe(e,t,n,o){var a={};return e!==t&&(a.o_price=e),a.f_price=t||e,a.discount=n?Math.round((e-t)*100)/100:0,a.discount_percent=n||0,a.currency=o,a}function Ze(e){var n;if(e.groupBy)return e.groupBy;const t=(n=e._all_variant_info)==null?void 0:n.filter(o=>{var a;return((a=o.matches)==null?void 0:a.length)>1}).map(o=>o.title).join(" > ");return t!=null?t:"None"}function Pn(e){return e?e.map(t=>t!=null&&t.name?t==null?void 0:t.name:t):[]}function En(e){return{count:e.is_plp?1:(e._slider_images||[]).length}}function An(e,t,n){const o={...e};return delete o.ean,{...o,status:t.status,gtin:t.gtin,variant:t.id,position:n||(t==null?void 0:t.position)||1,price:Xe(t.price||e.price,t.true_price||e.sale_price,e.discount,"EUR")}}function Dn(e){if(!e)return;const t=Object.keys(e);if(t.length===0)return;const n=fe;let o=0,a=window.dataLayer.filter(i=>i.event==="promotions_push").length+1,r=[];t.forEach(i=>{const c=e[i].compositions;c&&c.forEach(s=>{const l=s.artworks;l&&l.forEach(_=>{var C;const f=(C=_==null?void 0:_.map(g=>g==null?void 0:g.artwork).filter(g=>g))!=null?C:[];f!=null&&f.length&&f.forEach(g=>{const u=g.id,k="artwork-".concat(u),A=document.getElementById(k);if(A){const S=et(A);r=r.concat(S)}})})})}),r.length!==0&&r.forEach(function(i,c){if(c%n===0){var s={event:"promotions_push",index_pushed:a};s["promotions_"+a]=r.slice(o,o+n),window.dataLayer.push(s),o+=n,a+=1}})}const xn=e=>{const t=[];return e.forEach(n=>{var o={id:n.id,name:n.name,pos:n.position,creative:n.creative};t.push(o)}),t.filter(function(n){return n||void 0}),ze(t,Je)},Mn=e=>{const t=[];return e.querySelectorAll("div.artwork.total_look[data-json]").forEach(o=>{let a;try{a=JSON.parse(decodeURIComponent(o.getAttribute("data-json")))}catch(r){console.error("Error parsing total look artwork data",r)}a&&t.push(a)}),t},et=(e,t)=>{const n=cn.buildSimplePromos(e,t),o=Mn(e);return[...n,...o]};function In(e=!1){var t=0;const n=fe;var o=1;const a=et(document,e);a.length>0&&a.forEach(function(r,i){if(i%n===0){var c={event:"promotions_push",index_pushed:o};c["promotions_"+o]=a.slice(t,t+n),window.dataLayer.push(c),t+=n,o+=1}})}function Rn(e){var i,c,s,l,_;var t=0,n=10,o=1;const a=((_=(l=(s=(c=(i=window.dataLayer)==null?void 0:i[0])==null?void 0:c.page)==null?void 0:s.hierarchy)==null?void 0:l.join)==null?void 0:_.call(l,"/"))||"",r=window.dataLayer[0].page.type;e.forEach(function(f,C){var u;if(f.vendor="eci::".concat(((u=f.category)==null?void 0:u.join("/"))||a,"::").concat(r),C%n===0){var g={event:"product_module_push_eci",index_pushed:o};g["product_modules_eci_"+o]=e.slice(t,t+n),window.dataLayer.push(g),t+=n,o+=1}})}function On(e){const t=fe;let n=0,o=window&&window.dataLayer?window.dataLayer.filter(r=>r.event==="promotions_push").length+1:1;const a=xn(e);a.length>0&&a.forEach(function(r,i){if(i%t===0){var c={event:"promotions_push",index_pushed:o};c["promotions_"+o]=a.slice(n,n+t),window.dataLayer.push(c),n+=t,o+=1}})}function Bn(e,t){const n=fe;let o=0,a=window&&window.dataLayer?window.dataLayer.filter(i=>i.event==="promotions_push").length+1:1,r=[];if(Array.isArray(e)?e.forEach(i=>r.push(...Me(i))):r=Me(e),r.length>0&&r.forEach(function(i,c){if(c%n===0){var s={event:"promotions_push",index_pushed:a};s["promotions_"+a]=r.slice(o,o+n),window.dataLayer.push(s),o+=n,a+=1}}),t)return t()}var Me=function(e){let t=[];const n=Array.from(e.querySelectorAll("span.dataholder[data-scope='promotion'][data-hasnav='true']"));return n.length&&(t=n.map(function(o,a){var r=o.closest("div.image-overlay-out")||o.closest("div.non-overlay-out")||o.closest("div.image-overlay-in")||o.closest("div.non-overlay-in"),i=!0,c=JSON.parse(o.getAttribute("data-json")),s=o.closest("div.composition-container[data-dmp_segments], div.composition-container[data-cdp_segments]"),l=o.closest("div.composition-container"),_=l.closest("div.composition");if((l&&window.getComputedStyle(l).display==="none"||_&&window.getComputedStyle(_).display==="none")&&(i=!1),s&&i){var f=s.getAttribute("data-dmp_segments"),C=f?f.split(","):[],g=s.getAttribute("data-cdp_segments"),u=g?g.split(","):[],k=C.concat(u),A=["kxelcorteinglessa_allsegs","kxelcorteinglessa_segs"],S=!1;A.forEach(function(d){var h=window.localStorage.getItem(d);!S&&h&&k.forEach(function(m){h.indexOf(m)!==-1&&(S=!0)})}),i=S}else r&&window.getComputedStyle(r).display==="none"&&(i=!1);if(i)if(c){var w={id:c.id,name:c.name,pos:c.position,creative:c.creative};return(c.creative==="canvas"||c.creative==="multipurpose")&&(w=Tn(o,w)),w}else console.warn("loadPromotions:: No se ha especificado data-json para la promocion["+a+"]")}).filter(function(o){return o||void 0})),ze(t,Je)};function tt({id:e,name:t,pos:n,creative:o}){const a={event:"promotion_click",promotion:{id:e,name:t,pos:n,creative:o}};window.dataLayer.push(a)}function Tn(e,t){var n=e.closest(".artwork.canvas");if(!n)return t;var o="none";if(n.classList.contains("small")){var a=window.getComputedStyle(n).display;if(a!=="none"){var r=e.closest("div:not(.links-set)");o=window.getComputedStyle(r).display}}else o=window.getComputedStyle(n).display;if(o!=="none")return t}function Fn(e){const{label:t,action:n}=e,o=window.location.pathname,r=(o==null?void 0:o.includes("search-nwx"))?"serps product filters":"product filters";v({name:r,category:r,action:n,label:t})}function Un(){v({name:"product shipping filter",category:"product shipping filter",action:"click on drop down",label:"undefined"})}function Vn(e){const t={step:1,event:"checkout_push",products:e};window.dataLayer.push(t)}function jn(e,t,n,o,a){var s,l,_;const r=n.line_items.map(f=>f.data_layer),i={registered:!0,flat_rate:n.flat_rate_shipping.enabled,postal_code:o==null?void 0:o.postal_code,id:n.user.id,sp_id:((s=n.user)==null?void 0:s.status)>=2?me(((l=n.user)==null?void 0:l.id)+"baba"):void 0,email:(_=n.user)==null?void 0:_.email,cookies:a},c={system_event:!0,event:"purchase",...e,products:r,user:i,page:t};window.dataLayer.push(c)}function Nn(){v({name:"finance payment",category:"finance payment",action:"open finance payment simulator"})}function $n(e,t){if(!t||!e||!["play","pause","ended"].includes(e))return;v({name:"html5 vídeo",category:"html5 vídeo",action:e,label:t})}function qn(e){v({name:"search",category:"browser",action:"search",label:e})}function Hn(e){const t=e.hierarchy.join("/");return"eci::".concat(t,"::").concat(he.BUY_LOOK)}function Wn(e,t="eci"){var o,a,r,i,c;const n=((c=(i=(r=(a=(o=window.dataLayer)==null?void 0:o[0])==null?void 0:a.page)==null?void 0:r.hierarchy)==null?void 0:i.join)==null?void 0:c.call(i,"/"))||"";return"".concat(t,"::").concat(n,"::").concat(e)}function zn(){v({name:"click on product customization",category:"product customization",action:"click on product customization"})}function Jn(){v({name:"added product customization",category:"product customization",action:"added product customization"})}function Gn(e){v({name:"notify me notify me cooming soon",category:"wishlist",action:"notify me coming soon",label:e})}function nt(e){if(e){const t={event:"rr_click",system_event:!0,rr_product_click:{...e}};window.dataLayer.push(t)}}function Yn(e,t,n){const o=e.map((i,c)=>{var f;const s=i.item_id.split("-")[2],l=((f=window.dataLayer[0].page.hierarchy)==null?void 0:f.join("/"))||"",_=i.list_product_categories&&i.list_product_categories.map(C=>C.name)||[];return{name:i.description,id:s,brand:i.brand.name,position:c+1,price:{currency:"EUR",discount:i.price_specification.price-i.price_specification.discount_price,discount_percent:i.price_specification.discount_price/i.price_specification.price*100,f_price:i.price_specification.discount_price,o_price:i.price_specification.price},category:_,code_a:i.product_id,vendor:"serps_ai::".concat(l,"::chatbot"),parent_id:"chatID>".concat(n)}}),a="product_modules_serps_ai_"+t,r={system_event:!0,event:"product_module_push_serps_ai",index_pushed:t,[a]:JSON.parse(JSON.stringify(o))};window.dataLayer.push(r)}function Kn(e,t,n){var i,c;const o=e.item_id.split("-")[2],a=((i=window.dataLayer[0].page.hierarchy)==null?void 0:i.join("/"))||"",r=((c=e.categories)==null?void 0:c.map(s=>s.name))||[];window.dataLayer.push({system_event:!0,event:"serps_ai_click",serps_ai_product_click:{name:e.description,id:o,brand:e.brand.name,position:t,price:{currency:"EUR",discount:e.price_specification.price-e.price_specification.discount_price,discount_percent:e.price_specification.discount_price/e.price_specification.price*100,f_price:e.price_specification.discount_price,o_price:e.price_specification.price},category:r,code_a:e.product_id,vendor:"serps_ai::".concat(a,"::chatbot"),parent_id:"chatID>".concat(n)}})}function Qn(e){window.dataLayer.push({system_event:!0,event:"product_pdp_push",product:e})}function Xn(){v({name:"serps_ai",category:"serps_ai",action:"open chat",label:"undefined"})}function Zn(){v({name:"serps_ai",category:"serps_ai",action:"close chat",label:"undefined"})}function eo(){v({name:"serps_ai",category:"serps_ai",action:"consent accepted",label:"undefined"})}function to(){v({name:"serps_ai",category:"serps_ai",action:"logged in by chatbot",label:"undefined"})}function no(){v({name:"serps_ai",category:"serps_ai",action:"consent shown",label:"undefined"})}function oo(){v({name:"serps_ai",category:"serps_ai",action:"text search",label:"undefined"})}function ao(){v({name:"serps_ai",category:"serps_ai",action:"clean search",label:"undefined"})}function ro(e){v({name:"serps_ai",category:"serps_ai",action:"error",label:e})}function io(e){v({name:"serps_ai",category:"serps_ai",action:"suggestions shown",label:e})}function so(e){v({name:"serps_ai",category:"serps_ai",action:"clic on suggestion",label:e})}function co(){v({name:"serps_ai",category:"serps_ai",action:"filters in chat shown",label:"undefined"})}function lo(e,t){v({name:"serps_ai",category:"serps_ai",action:e,label:t})}function uo(){v({name:"serps_ai",category:"serps_ai",action:"view more products",label:"undefined"})}function fo(){v({name:"serps_ai",category:"serps_ai",action:"products shown",label:"undefined"})}function mo(){v({name:"serps_ai",category:"serps_ai",action:"product click",label:"undefined"})}function _o(e){v({name:"serps_ai",category:"serps_ai",action:"product add to cart",label:e||"undefined"})}function po(){v({name:"serps_ai",category:"serps_ai",action:"click on back to chat",label:"undefined"})}function ho(e){v({name:"serps_ai",category:"serps_ai",action:e,label:"undefined"})}function vo(){v({name:"serps_ai",category:"serps_ai",action:"rating shown",label:"undefined"})}function yo(e){v({name:"serps_ai",category:"serps_ai",action:"rating",label:e})}function go(e){const t={};t.product=e,t.event="add_to_cart_insurance",window.dataLayer.push(t)}function wo(e,t){var a,r;const o=window.dataLayer[0].page;return{associated_product:{brand:o==null?void 0:o.brand,category:t==null?void 0:t.category,id:t==null?void 0:t.id,variant:t==null?void 0:t.variant.trim()},category:t==null?void 0:t.category,id:(a=e.insurance_reference)==null?void 0:a.trim(),name:e.name,page_type:o==null?void 0:o.type,price:{f_price:e.insurance_price,discount:0,currency:(r=t==null?void 0:t.price)==null?void 0:r.currency},quantity:e.units,variant:e.reference}}function Co(e,t,n){if((window.dataLayer||[]).length===0)return;const a=e.slice(0,t);ot(a,n)}function ot(e,t){const n=window.dataLayer[0].page.hierarchy.join("/"),o={system_event:!0,event:"product_module_push_art",index_pushed:t};o["product_modules_art_"+t]=e,e.forEach(function(a){a.added=!0,a.vendor="art::"+n+"::Te recomendamos"}),window.dataLayer.push(o)}function ko(e){v({name:"insurance up sell",category:"insurance up sell",action:"show insurance",label:e})}function bo(e){v({name:"insurance up sell",category:"insurance up sell",action:"see insurance terms",label:e})}function So(e){v({name:"insurance up sell",category:"insurance up sell",action:"close insurance terms",label:e})}function Lo(e){v({name:"insurance up sell",category:"insurance up sell",action:"add insurance to cart",label:e})}function Po(){v({category:"store sales assistant",action:"click contact assistant",label:void 0})}function Eo(e,t){v({category:"store sales assistant",action:e,label:t})}function Ao(e,t,n){const o=window.dataLayer,a=o&&o.id_vendor&&o.id_vendor.length>0;if(!e||!t||!n||a)return;const r={event:"call_vendor",vendor_info:{p_variant:e,id_vendor:t,id_center:n,fx_call:new Date().getTime()}};o.push(r)}function Do(e){v({category:"store sales assistant",action:"click connect with assistant",label:e})}function xo(e,t){const n=window.dataLayer;if(Array.isArray(e)&&(e=e[0]),!e||!e.product)return;const o=e.product;o.id_vendor=t;var a={event:"product_pdp_push",index_pushed:1,product_1:o};n.push(a)}function Mo(e,t,n){const o=[];o.push({...e},{...t}),Ye(o,n)}function Io(e,t){var r,i,c,s,l,_,f;const n=(i=(r=e.url.split("?"))==null?void 0:r[0])==null?void 0:i.replace(/^\//,"").replace(/\/$/,""),o=(f=(_=(l=(s=(c=window==null?void 0:window.dataLayer)==null?void 0:c[0])==null?void 0:s.page)==null?void 0:l.hierarchy)==null?void 0:_[0])!=null?f:"Home",a={name:"mundo ".concat(o),category:"mundo ".concat(o),action:t,label:"".concat(n,">").concat(e.name)};v(a)}function Ro(){for(let e=0;e<window.dataLayer.length;e++)if(window.dataLayer[e].event==="user_push"){window.dataLayer.push(window.dataLayer[e]);break}}function v(e,t=!1){const{name:n,category:o,action:a,label:r}=e,i={event:"custom_event",event_data:{event_name:n,event_category:o,event_action:a}};(r||t)&&(i.event_data.event_label=r),window.dataLayer.push(i)}function Oo(e){v({name:"size_guide",category:"sayfit",action:e})}function Bo(e){const t=["tour_terrazayjardin"],o=new URLSearchParams(window.location.search).get("third");o&&t.includes(o)&&(e.third_driver=o)}function To(e=""){const t={name:"view description",category:"view product description",action:"open ".concat(e),label:void 0};v(t)}function Fo(e="",t=!1){const n={name:"shared referral",category:"shared_referral",action:"".concat(t?Ge.SHARED_MOBILE:"shared_".concat(e)),label:void 0};v(n,!0)}function Uo(e,t){if(!e)return;const n=t?"".concat(e.analytics_name,"+").concat(t):e.analytics_name,o={creative:e.type,id:e.id,name:n,pos:e.in_placement};tt(o)}var we={PRODUCT_PUSH_TYPES:ln,VENDOR_MODULES:he,SHARE_LINK_TYPES:Ge,buildProductDatalayer:Qe,buildWishlistProductBySku:An,buildGroupBy:Ze,createInsuranceLineItem:wo,sendAddCustomizedProductToCart:Jn,sendAddProductAndInsuranceToCartAnalytics:Mo,addProductToCartHandler:mn,sendAddUnitsInCart:ve,sendAddToCartIntent:_e,sendAddToWishListClick:gn,sendCartProducts:yn,sendChangeUnitsInCart:dn,sendCustomizationButtonClick:zn,sendCustomerNotificationEvent:Gn,sendMultipleAddToCartClick:Ye,sendProductClick:Ke,sendProductPreviewLinkToPDPClick:hn,sendProductModulesPrint:vn,sendProductsPush:Cn,sendPromotionPushInitial:In,sendProductModulesPushInitial:Rn,sendParallaxPromotionPush:On,sendPromotionPushScroll:Dn,sendRemoveFromCartClick:ge,sendReloadEvent:kn,sendUserPush:wn,sendFacetDelivery:Fn,sendOneClickPurchaseConfirmation:jn,sendCheckoutPush:Vn,sendShowFinanciationClick:Nn,sendPromoClickEvent:tt,sendVideoPlayerEvent:$n,sendSearchEvent:qn,getTotalLookProductVendor:Hn,getPageVendor:Wn,sendAddToCart:ye,sendDeliveryTypeFilterOpenEvent:Un,sendRichRelevanceProductClick:nt,sendChatboxProductModule:Yn,sendProductClickChat:Kn,sendProductDetailPush:Qn,sendChatBoxOpen:Xn,sendChatBoxClose:Zn,sendChatBoxConsentAccepted:eo,loggedInByChatbot:to,sendChatBoxConsentShown:no,sendChatBoxSendMessage:oo,sendChatBoxClearContext:ao,sendChatBoxError:ro,sendChatBoxShowSuggestions:io,sendChatBoxSendSuggestion:so,sendChatBoxShowFilters:co,sendChatBoxSendFilters:lo,sendChatBoxShowPLP:fo,sendChatBoxClickProduct:mo,sendChatBoxAddToCart:_o,sendChatBoxGoBackPDP:po,sendChatBoxLikeDislike:ho,sendChatBoxRatingShown:vo,sendChatBoxRating:yo,sendChatBoxViewMoreProducts:uo,sendInitialCdpProductsPush:Co,addCPDProductPushEvent:ot,pushInsuranceAddToCart:go,sendCarouselPromotionPush:Bn,sendInsurancePrint:ko,sendInsuranceHireButtonClick:bo,sendInsuranceHireModalClose:So,sendInsuranceAddToCart:Lo,sendAnalyticsExpertContactInit:Po,sendAnalyticsExpertVendorId:Ao,sendAnalyticsExpertCustom:Eo,sendAnalyticsExpertContactType:Do,sendAnalyticsExpertPdp:xo,sendContextMenuItemAnalytics:Io,resendUserEvent:Ro,sendCustomEvent:v,sendShowSayfitEvent:Oo,sendShowCharacteristicsModalEvent:To,sendSharedReferralModalEvent:Fo,sendArtworkClickEvent:Uo,sendRetailMediaProductImpressionEvent:un,sendRetailMediaProductClickEvent:fn};const Vo=(e,t,n)=>{let o=window;for(const a of e)o[a]=o[a]||{},o=o[a];o[t]=n};function jo(e){const t=window.localStorage.getItem("kxelcorteinglessa_segs"),n=e==null?void 0:e.compositions;let o;return n?Array.isArray(n)?o=n.filter(r=>r!==void 0):o=[]:o=[],!o.some(r=>{var i;return(i=r.cdp_segments)!=null&&i.length?r.cdp_segments.some(c=>typeof t=="string"&&t.includes(c)):!0})}function at(e){let t;e?t=Array.isArray(e)?e:[]:t=[];const n=window.localStorage.getItem("kxelcorteinglessa_segs");if(!n)return;t.filter(a=>{var r;return((r=a.cdp_segments)==null?void 0:r.length)&&a.cdp_segments.some(i=>n.includes(i))}).forEach(a=>{var r;(r=document.getElementById("compo-"+a.id))==null||r.classList.remove("hidden")})}function rt(e){e&&window.localStorage.setItem("kxelcorteinglessa_segs",e);const t=window.localStorage.getItem("kxelcorteinglessa_segs"),n=Array.from(document.getElementsByClassName("composition-container"));!n||!n.length||!t||n.filter(o=>{if(!o.getAttribute("data-cdp_segments")||!o.getAttribute("data-cdp_segments").length)return!1;const a=o.getAttribute("data-cdp_segments").split(",");return a&&(a==null?void 0:a.length)&&a.some(r=>t.includes(r))}).forEach(o=>{document.getElementById(o.id).classList.remove("hidden")})}function No(e){at(e),rt()}function $o(e,t,n){Array.isArray(e)||(e=[e]),e.filter(o=>o.control_segments).forEach(o=>{let a="";const r=o.segments.join(",");switch(r.indexOf("flate_rate")!==-1&&(a="flate_rate"),r.indexOf("logged_")!==-1&&(a="loging"),a){case"flate_rate":it(o,t,n);break;case"loging":ct(o,t);break}})}function qo(e,t,n){e.filter(o=>o.control_segments).forEach(o=>{const a=o.segments.join(",");(a.indexOf("_colective_")!==-1||a.indexOf("_collective_")!==-1)&&st(o,t,n)})}function j(e,t){const n=document.getElementById("compo-"+e);t?n.classList.add("hidden"):n.classList.remove("hidden")}function it(e,t,n){const o=e.segments.includes("flate_rate_true");o&&t&&n&&j(e.id,!1),!o&&(t&&!n||!t)&&j(e.id,!1)}function st(e,t,n){if(!n||!t)return;const o=t.colectives;e.segments.forEach(a=>{if(a.indexOf("_colective_")===-1&&a.indexOf("_collective_")===-1)return;const r=a.split("_colective_"),i=a.split("_collective_");o.includes(r[0])&&r[1]==="true"&&j(e.id,!1),!o.includes(r[0])&&r[1]==="false"&&j(e.id,!1),o.includes(i[0])&&i[1]==="true"&&j(e.id,!1),!o.includes(i[0])&&i[1]==="false"&&j(e.id,!1)})}function ct(e,t){const n=e.segments.includes("logged_true"),o=e.segments.includes("logged_false");t&&n&&j(e.id,!1),!t&&o&&j(e.id,!1)}function Ho(e){const t=window.localStorage.getItem("kxelcorteinglessa_segs");return e.value.filter(o=>{var a,r;if((a=o.cdp_segments)!=null&&a.length){if((r=o.cdp_segments)!=null&&r.length&&o.cdp_segments.some(i=>t==null?void 0:t.includes(i)))return o}else return o})}const Wo=Object.freeze(Object.defineProperty({__proto__:null,addCompositionClass:j,handleFlateRateCompositions:it,handleFunctionalSegmentsCompositions:$o,handleLoginSegments:ct,handleMrcaSegments:st,handleMrcaSegmentsCompositions:qo,isHiddenByCDPSegments:jo,loadCDPfunctions:No,removeByCDPSegments:Ho,removeHiddenByCDPSegments:at,removeHiddenByCDPSegmentsAutofind:rt},Symbol.toStringTag,{value:"Module"})),zo=ce(Wo),Jo=(e,t="auto",n,o)=>{if(n&&Go(n))return;const a=document.createElement("script");o&&a.addEventListener("load",o),a.setAttribute("src",e),n&&a.setAttribute("id",n),a.setAttribute("fetchpriority",t),document.body.appendChild(a)},Go=e=>!!document.getElementById(e),Yo=(e,t,n)=>{n||(n=document.body);const o=document.createElement("script");e&&o.setAttribute("src",e),Object.keys(t).forEach(function(r){t[r]!==""&&(o.dataset[r]=t[r].trim())}),n.appendChild(o)};var Ko={addScriptFromUrl:Jo,addScriptWithDataset:Yo};const te=we,lt=Ko;function Qo(e){const t=e?document.querySelector(e):document;if(typeof t>"u")return;const n=t.querySelectorAll(".artwork video:not(.js-videojs)"),o=t.querySelectorAll(".artwork video.js-videojs");n!=null&&n.length&&(n.forEach(a=>{a.oncanplay=function(){dt(a)}}),window.addEventListener("load",()=>{Ce(t)})),o!=null&&o.length&&Xo(t)}function Xo(e){document.getElementById("video-store")?Ie(e):lt.addScriptFromUrl("https://cdn.grupoelcorteingles.es/statics/front-msh2-eci-non-food/assets/javascripts/library/external/video-store.js","high","video-store",Ie)}function Ie(e){document.getElementById("video-switch")?Ce(e):lt.addScriptFromUrl("https://cdn.grupoelcorteingles.es/statics/front-msh2-eci-non-food/assets/javascripts/library/external/video-switch-res.js","high","video-switch")}function Ce(e){e.querySelectorAll(".artwork video").forEach(n=>{e&&n.classList.contains("js-videojs")&&videojs(n),dt(n)})}function Zo(e){const t=e&&getComputedStyle(e).getPropertyValue("display");return t!==""&&t!=="none"}function dt(e){try{let t=e.classList.contains("_canvas")?e.closest("div.canvas"):e.closest("div");e.classList.contains("exclude")&&(t=e.closest(".exclude-wrapper"));let n;if(!Zo(e))return;if(/^vjs_video/.test(e.id)){const s=e.closest("div.videojs-wrp");s&&(t=s),n=window.videojs.getPlayer(e.id),n&&n.controls()&&(n.on("play",()=>{te.sendVideoPlayerEvent("play",n.el().dataset.name)}),n.on("pause",()=>{te.sendVideoPlayerEvent("pause",n.el().dataset.name)}),n.on("ended",()=>{te.sendVideoPlayerEvent("finished",n.el().dataset.name)}))}else{const s=e.closest("div[id^=artwork-]"),l=s&&s.dataset.name;e.controls&&(e.onplay=()=>{te.sendVideoPlayerEvent("play",l)},e.onpause=()=>{te.sendVideoPlayerEvent("pause",l)},e.onended=()=>{te.sendVideoPlayerEvent("finished",l)})}const o=()=>n?!!n.audioTracks().length||a(n):a(e),a=s=>s.mozHasAudio||!!s.webkitAudioDecodedByteCount||!!(s.audioTracks&&s.audioTracks.length);if(!o()||n&&n.controls()||e.controls){t.classList.remove("video-wrapper"),t.classList.remove("video-wrapper--unmuted");return}const r=()=>n?n.muted()||n.volume()<=0:e.muted||e.volume<=0,i=(s,l)=>{if(n)n.muted(s);else{if(!l&&!e.muted)return;e.muted=s}},c=()=>n?n.autoplay():e.autoplay;if(t){t.classList.add("video-wrapper");const s=()=>t.classList.toggle("video-wrapper--unmuted",!r());n?n.on("volumechange",()=>s()):e.onvolumechange=()=>s(),s(),t.onclick=_=>{const f=getComputedStyle(t,":after");if(!f)return;const C=parseFloat(f.top),g=parseFloat(f.top)+parseFloat(f.height),u=parseFloat(f.left),k=parseFloat(f.left)+parseFloat(f.width);(_.offsetY-C)*(_.offsetY-g)>0||(_.offsetX-u)*(_.offsetX-k)>0||(_.preventDefault(),i(!r(),!0))},n?(n.on("enterpictureinpicture",()=>{t.classList.add("video-wrapper--disabled")}),n.on("leavepictureinpicture",()=>{t.classList.remove("video-wrapper--disabled")})):(e.onenterpictureinpicture=()=>t.classList.add("video-wrapper--disabled"),e.onleavepictureinpicture=()=>t.classList.remove("video-wrapper--disabled")),new IntersectionObserver(_=>{_.forEach(f=>{f.intersectionRatio>0?e.reloadMuteState&&(e.reloadMuteState=!1,i(e.previousMutedState)):!e.paused&&!e.muted&&(e.reloadMuteState=!0,e.previousMutedState=e.muted,i(!0))})}).observe(e)}i(c())}catch(t){console.log("Error processing video artwork.",t)}}var ea={loadVideoController:Qo,loadVideoConfiguration:Ce};const Re=/compo-/;function ta(e,t){const n=ut(e.sheet_id);if(!(n!=null&&n.length))return[];const o=[];return n.forEach(a=>{var c;for(a.id=a.id+"-"+t;a.lastElementChild;)a.removeChild(a.lastElementChild);const r=na(a),i=e.compositions.find(s=>s.id===r);if(i){const s=a.dataset.name,l=i.artworks.flatMap(_=>_.map(f=>f==null?void 0:f.artwork)).find(_=>(_==null?void 0:_.name)===s);if(l){const _=JSON.stringify({entity:"artwork",id:l.id}),f=(c=l.settings)==null?void 0:c.data;if(f){f._is_available=!0;const C={id:a.id,name:s,data:f,uuid:a.id+t,site_manager:_};o.some(g=>g.id===C.id)||o.push(C)}}}}),o}function ut(e){const t=document.querySelector("#sheet-"+e);return t?t.querySelectorAll(".artwork.product_store, .artwork.simple_product"):!1}function na(e){let t=e.parentElement;for(;t;){if(t.id&&Re.test(t.id))return t.id.replace(Re,"");t=t.parentElement}return null}var oa={initSimpleProductData:ta,getProducts:ut};function ft(e,t){try{return{id:e.id,parent_id:t,name:e.name,type:e.type,mainImage:e.settings.image,mainImageTitle:e.settings.image_title,callToAction:e.settings.cta_text,analyticsName:e.analytics_name,products:e.settings.multi_product_id}}catch(n){return console.log("Error processing Buy The Look placement data: ",n),null}}function aa(e){var o,a,r,i,c;let t=null;const n=(e==null?void 0:e.all_images)||null;if(Array.isArray(n)&&n.length>0){if(t=((a=(o=n.find(s=>s.is_plain))==null?void 0:o.sources)==null?void 0:a.small)||null,t||(t=n[0]||null),t.sources&&t.sources.small)return t.sources.small;if(t.default_source)return t.default_source}else t=((i=(r=e==null?void 0:e.image)==null?void 0:r.sources)==null?void 0:i.small)||null,t||(t=((c=e==null?void 0:e.image)==null?void 0:c.default_source)||null);return t}function ra(e){if(!e)return[];const t=[];let n=Array.isArray(e.compositions)?e.compositions:[e.compositions];n=n.filter(o=>!!o&&o.artworks&&Array.isArray(o.artworks));for(const o of n)for(const a of o.artworks.filter(r=>!!r&&Array.isArray(r)))for(const r of a.filter(i=>!!i&&i.artwork))if(r.artwork.type==="total_look"){const i=ft(r.artwork);i&&t.push(i)}return t}var ia={getProductPlainImage:aa,buildBuyLookDataByArtwork:ft,getTotalLookData:ra};const sa=ia,ca=we;function la(e,t,n){try{if(!Array.isArray(e==null?void 0:e.compositions))return[];const o=sa.getTotalLookData(e);if(o.length)return da(t,e,n),o}catch(o){return console.log(o),[]}}const da=(e,t,n)=>{ua(t.sheet_id).forEach(a=>{a.href=a.href.replace("javascript:void(geci.vue.placements.showBuyLook","javascript:void(geci.vue.placements.showBuyLook"+"['".concat(e,"']"))}),fa(e,n)};function ua(e){const t=document.querySelector("#sheet-"+e);return t?t.querySelectorAll(".artwork.total_look ._href_js"):!1}const fa=(e,t)=>{window.geci||(window.geci={}),window.geci.vue||(window.geci.vue={}),window.geci.vue.placements||(window.geci.vue.placements={}),window.geci.vue.placements.showBuyLook||(window.geci.vue.placements.showBuyLook={}),window.geci.vue.placements.showBuyLook[e]=function(n){const o=t.proxy.buyLookData.filter(a=>a.id===n)[0]||null;if(o){const a={id:o.id,name:o.name,pos:t.proxy.placement.placement_name,creative:o.type};ca.sendPromoClickEvent(a)}t.proxy.activeBuyLookId=n,t.refs.buyLookModal.showModal()}};var ma={loadBuyLookData:la};function _a(e,t){try{return Array.isArray(e==null?void 0:e.compositions)?pa(e,t):[]}catch(n){return console.error(t,e,n),[]}}function pa(e,t){if(!e)return[];const n=[];let o=Array.isArray(e.compositions)?e.compositions:[e.compositions];o=o.filter(a=>!!a&&a.artworks&&Array.isArray(a.artworks));for(const a of o)for(const r of a.artworks.filter(i=>!!i&&Array.isArray(i)))for(const i of r.filter(c=>!!c&&c.artwork))i.artwork.type===t&&n.push({composition_id:a.id,...i.artwork});return n}var ha={loadRetailMediaData:_a};const ne=zo,Oe=ea,Be=oa,va=ma,ya=ha,ga=["multipurpose_vue","separator_vue","button_vue","showcase","image_vue"];function wa(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(t)){for(const n of t)if(e[n]&&e[n].html)return!0}else if(typeof t=="string"&&e[t]&&e[t].html)return!0;return!1}function mt(e){let t=0;return e.header&&t++,e.hero&&t++,e.top_page&&t++,t}function Ca(e,t,n,o,a){const r=o,i=o/2;return Object.entries(a).sort((s,l)=>parseInt(s[0])-parseInt(l[0])).filter(s=>parseInt(s[0])<=t).reduce((s,l)=>{const[_,f]=l;let C=n-1,g=0;parseInt(_)==t?C=e%n:(f.after_first_row&&g++,f.after_second_row&&g++,f.mid_page&&g++);const u={rowsDesktop:s.rowsDesktop,lastRowEmptyBlocksDesktop:0,rowsMobile:s.rowsMobile,lastRowEmptyBlocksMobile:0};mt(f)&&(s.lastRowEmptyBlocksDesktop=0,u.rowsDesktop+=1,s.lastRowEmptyBlocksMobile=0,u.rowsMobile+=1);const A=Object.keys(f).filter(P=>/^product_preview/.test(P)).map(P=>{const R=P.match(/^product_preview\[(\d+)\]$/);if(Array.isArray(R)&&R.length==2)return R[1];if(/^product_preview$/.test(P))return 0}).filter(P=>P<=C).length,S=C+1+A-s.lastRowEmptyBlocksDesktop,w=Math.ceil(S/r),d=S%r?r-S%r:0;u.rowsDesktop+=w+g,u.lastRowEmptyBlocksDesktop=d;const h=C+1+A-s.lastRowEmptyBlocksMobile,m=Math.ceil(h/i),y=h%i?i-h%i:0;return u.rowsMobile+=m+g,u.lastRowEmptyBlocksMobile=y,u},{rowsDesktop:0,lastRowEmptyBlocksDesktop:0,rowsMobile:0,lastRowEmptyBlocksMobile:0})}function ka(e){const t=document.querySelector("#sheet-"+e.sheet_id);return t?t.querySelectorAll(".artwork a.modal"):!1}function ba(e){const t=document.querySelector("#sheet-"+e.sheet_id);return t?t.querySelectorAll(".artwork a"):!1}function Sa(e){var t;return(t=e==null?void 0:e.compositions)==null?void 0:t.find(n=>{var o;return(o=n.artworks)==null?void 0:o.every(a=>a===null||(a==null?void 0:a.every(r=>{var i,c;return r===null||((c=(i=r==null?void 0:r.artwork)==null?void 0:i.settings)==null?void 0:c.mobile_image)})))})}function La(e){const t=[];return e!=null&&e.compositions&&e.compositions.forEach(n=>{const o=n.is_carousel||n.mobile_carousel;n==null||n.artworks.forEach((a,r)=>{var c;if(!a)return;const i=a.find(s=>s&&ga.includes(s.artwork.type));i&&(i.artwork.in_placement=e.placement_name,i.artwork.is_carousel=o,i.artwork.layout=(c=n.layout)==null?void 0:c[r],t.push(i.artwork))})}),t}var I={hasPlacementHtml:wa,countPlpTopPlacements:mt,getProductRowInProductListWithPlacements:Ca,isHiddenByCDPSegments:ne.isHiddenByCDPSegments,removeHiddenByCDPSegments:ne.removeHiddenByCDPSegments,removeHiddenByCDPSegmentsAutofind:ne.removeHiddenByCDPSegmentsAutofind,handleMrcaSegmentsCompositions:ne.handleMrcaSegmentsCompositions,handleFunctionalSegmentsCompositions:ne.handleFunctionalSegmentsCompositions,loadCDPfunctions:ne.loadCDPfunctions,loadVideoController:Oe.loadVideoController,loadVideoConfiguration:Oe.loadVideoConfiguration,initSimpleProductData:Be.initSimpleProductData,getProducts:Be.getProducts,loadBuyLookData:va.loadBuyLookData,getArtworksWithLinks:ba,getArtworksWithLinkThatOpensOnModal:ka,loadRetailMediaData:ya.loadRetailMediaData,hasArtworksWithMobileImage:Sa,getVueArtworks:La};const G={guest:".js-wineclub-guest",softlogged:".js-wineclub-softlogged",subscribed:".js-wineclub-subscribed",subscribedWelcome:".js-wineclub-subscribed-welcome",nonsubscribed:".js-wineclub-nonsubscribed",landing:".js-wineclub-landing",iframe:"#iframe-cdv"},ie={redirectGuest:"data-redirect-guest",redirectSoftlogged:"data-redirect-softlogged",redirectSubscribed:"data-redirect-subscribed",redirectSubscribedWelcome:"data-redirect-subscribed-welcome",redirectNonsubscribed:"data-redirect-nonsubscribed"},Pa=e=>e==="0",_t=e=>e==null?void 0:e.html,Ea=e=>_t(e)&&e.html.includes("js-wineclub-landing"),ke=e=>{if(!_t(e))return;const t=document.createElement("div");return t.innerHTML=e.html,t},Aa=(e,t)=>{if(!e||!(e instanceof HTMLElement)||!t)return;const n=e.querySelector(t);if(n)return Ia(n),n.classList.remove("hidden"),e.outerHTML},Da=(e,t)=>{if(!(!e||!(e instanceof HTMLElement)||!t))return e.querySelector(t)},xa=(e,t)=>{const n=Ma(e,t);return n?(window.location.replace(n),!0):!1},Ma=(e,t)=>{if(!e)return;const n=Da(e,G.landing);return n==null?void 0:n.getAttribute(t)},se=(e,t,n)=>{if(!xa(e,t))return Aa(e,n)},Ia=e=>{const t=e.querySelector(G.iframe);t&&(t.height=document.body.scrollHeight+"px")},Ra=e=>{const t=ke(e);return se(t,ie.redirectGuest,G.guest)},Oa=e=>{const t=ke(e);return se(t,ie.redirectSoftlogged,G.softlogged)},Ba=(e,t,n)=>{const o=ke(e);return t?n?se(o,ie.redirectSubscribedWelcome,G.subscribedWelcome):se(o,ie.redirectSubscribed,G.subscribed):se(o,ie.redirectNonsubscribed,G.nonsubscribed)};var Ta={handleGuestUser:Ra,handleHardLoggedUser:Ba,handleSoftLoggedUser:Oa,isSoftLogged:Pa,isWineClub:Ea};const Fa={__name:"Artwork",props:{artwork:{type:Object,required:!0},type:{type:[String,null],default:null,required:!0}},emits:["openInModal"],setup(e,{emit:t}){const n={multipurpose_vue:O(()=>B(()=>import("./Multipurpose-4fdc116a.js"),[window.__assetsPath("assets/Multipurpose-4fdc116a.js"),window.__assetsPath("assets/SrcsetPicture-afaa891e.js"),window.__assetsPath("assets/vuex.esm-bundler-f8eff60d.js"),window.__assetsPath("assets/usePriceFormat-08962b3d.js"),window.__assetsPath("assets/useArtworkUrlTarget-ac577016.js"),window.__assetsPath("assets/state-0c727e5f.js"),window.__assetsPath("assets/_plugin-vue_export-helper-c27b6911.js")],import.meta.url)),separator_vue:O(()=>B(()=>import("./Separator-8a675350.js"),[window.__assetsPath("assets/Separator-8a675350.js"),window.__assetsPath("assets/useArtworkUrlTarget-ac577016.js"),window.__assetsPath("assets/vuex.esm-bundler-f8eff60d.js"),window.__assetsPath("assets/state-0c727e5f.js"),window.__assetsPath("assets/_plugin-vue_export-helper-c27b6911.js")],import.meta.url)),button_vue:O(()=>B(()=>import("./Button-400ab81b.js"),[window.__assetsPath("assets/Button-400ab81b.js"),window.__assetsPath("assets/useArtworkUrlTarget-ac577016.js"),window.__assetsPath("assets/vuex.esm-bundler-f8eff60d.js"),window.__assetsPath("assets/state-0c727e5f.js"),window.__assetsPath("assets/_plugin-vue_export-helper-c27b6911.js")],import.meta.url)),showcase:O(()=>B(()=>import("./Showcase-80a275cf.js"),[window.__assetsPath("assets/Showcase-80a275cf.js"),window.__assetsPath("assets/useArtworkUrlTarget-ac577016.js"),window.__assetsPath("assets/vuex.esm-bundler-f8eff60d.js"),window.__assetsPath("assets/SrcsetPicture-afaa891e.js"),window.__assetsPath("assets/state-0c727e5f.js"),window.__assetsPath("assets/_plugin-vue_export-helper-c27b6911.js")],import.meta.url)),image_vue:O(()=>B(()=>import("./Image-c329b3be.js"),[window.__assetsPath("assets/Image-c329b3be.js"),window.__assetsPath("assets/useArtworkUrlTarget-ac577016.js"),window.__assetsPath("assets/vuex.esm-bundler-f8eff60d.js"),window.__assetsPath("assets/SrcsetPicture-afaa891e.js"),window.__assetsPath("assets/_plugin-vue_export-helper-c27b6911.js"),window.__assetsPath("assets/state-0c727e5f.js"),window.__assetsPath("assets/Image-53c36e73.css")],import.meta.url))},o=t,a=e;function r(i){o("openInModal",i)}return(i,c)=>(D(),F(je(n[a.type]),{artwork:a.artwork,onOpenInModal:c[0]||(c[0]=s=>r(s))},null,40,["artwork"]))}};var pe={exports:{}},Te=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(Te){var Fe=new Uint8Array(16);pe.exports=function(){return Te(Fe),Fe}}else{var Ue=new Array(16);pe.exports=function(){for(var t=0,n;t<16;t++)t&3||(n=Math.random()*4294967296),Ue[t]=n>>>((t&3)<<3)&255;return Ue}}var pt=pe.exports;const Ua=Ne(pt),Va=$e({__proto__:null,default:Ua},[pt]),ja=ce(Va);var Na=ja,$a=Bt;function qa(e,t,n){var o=t&&n||0;typeof e=="string"&&(t=e==="binary"?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||Na)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,t)for(var r=0;r<16;++r)t[o+r]=a[r];return t||$a(a)}var ht=qa;const vt=Ne(ht),nr=$e({__proto__:null,default:vt},[ht]),Ha=()=>{const e=Tt();return{getSequentialUuid:()=>(e.commit("uuid/getSequentialUuid"),e.getters["uuid/getCurrentSeed"]),getRandomUuid:()=>vt()}};const Ve={parallax:"Parallax",wineClub:"WineClub"},Wa={name:"Render",components:{BuyLookModal:O(()=>B(()=>import("./BuyLookModal-74611642.js"),[window.__assetsPath("assets/BuyLookModal-74611642.js"),window.__assetsPath("assets/SizeSelector-9ba6e22f.js"),window.__assetsPath("assets/DropDown-a76f5e4a.js"),window.__assetsPath("assets/vuex.esm-bundler-f8eff60d.js"),window.__assetsPath("assets/_plugin-vue_export-helper-c27b6911.js"),window.__assetsPath("assets/SizeList-92b44b6a.js"),window.__assetsPath("assets/Size-06c7d7fe.js"),window.__assetsPath("assets/defer-ac7afc4b.js"),window.__assetsPath("assets/usePriceFormat-08962b3d.js"),window.__assetsPath("assets/Modal-4b0c1909.js"),window.__assetsPath("assets/defer-106d1eb0.css"),window.__assetsPath("assets/SizeAttributes-6f38a124.js"),window.__assetsPath("assets/SizeAttributes-80546211.css"),window.__assetsPath("assets/navigatorDetect-1d2a0641.js"),window.__assetsPath("assets/state-0c727e5f.js"),window.__assetsPath("assets/useCustomerNotification-bad0d694.js"),window.__assetsPath("assets/marketplaceTypes-42317774.js"),window.__assetsPath("assets/Size-1d82f3ac.css"),window.__assetsPath("assets/Skeleton-fc79363e.js"),window.__assetsPath("assets/colorHasPriceRange-2401a3ab.js"),window.__assetsPath("assets/SizeList-2850bbb7.css"),window.__assetsPath("assets/productDetailLogic-e859225e.js"),window.__assetsPath("assets/formatString-a3c1eb18.js"),window.__assetsPath("assets/crossSellingTypes-8618da4f.js"),window.__assetsPath("assets/marketplace-0851b6dd.js"),window.__assetsPath("assets/productImage-e16b99b0.js"),window.__assetsPath("assets/shippingSelectTypes-2ba02b06.js"),window.__assetsPath("assets/strings-aba6b14c.js"),window.__assetsPath("assets/Spinner-4fecf309.js"),window.__assetsPath("assets/Spinner-6db6c11d.css")],import.meta.url)),ProductPreview:O(()=>B(()=>import("./ProductPreview-b4d5116b.js").then(e=>e.i),[window.__assetsPath("assets/ProductPreview-b4d5116b.js"),window.__assetsPath("assets/vuex.esm-bundler-f8eff60d.js"),window.__assetsPath("assets/navigatorDetect-1d2a0641.js"),window.__assetsPath("assets/useProductCompare-653ec34a.js"),window.__assetsPath("assets/marketplace-0851b6dd.js"),window.__assetsPath("assets/state-0c727e5f.js"),window.__assetsPath("assets/Brand-52056f66.js"),window.__assetsPath("assets/_plugin-vue_export-helper-c27b6911.js"),window.__assetsPath("assets/stockTypes-61b34c22.js"),window.__assetsPath("assets/imageImpolicyResolutionsTypes-92cbf4e7.js"),window.__assetsPath("assets/imageImpolicyResolutionsTypes-2575bb85.css"),window.__assetsPath("assets/colorHasPriceRange-2401a3ab.js"),window.__assetsPath("assets/BadgeGif-402a45b5.js"),window.__assetsPath("assets/useBadgeLink-a2b300bc.js"),window.__assetsPath("assets/BtnRedirectToPDP-c4077ba5.js"),window.__assetsPath("assets/defer-ac7afc4b.js"),window.__assetsPath("assets/usePriceFormat-08962b3d.js"),window.__assetsPath("assets/Modal-4b0c1909.js"),window.__assetsPath("assets/defer-106d1eb0.css"),window.__assetsPath("assets/useBadgeText-13c8b587.js"),window.__assetsPath("assets/Skeleton-fc79363e.js"),window.__assetsPath("assets/LongArrowRightIcon-1bd622b9.js"),window.__assetsPath("assets/throttle-5b801d35.js"),window.__assetsPath("assets/productImage-e16b99b0.js"),window.__assetsPath("assets/SizeGuideLink-1544103b.js"),window.__assetsPath("assets/debounce-0c3fcd84.js"),window.__assetsPath("assets/ProductPreview-d6880f4b.css")],import.meta.url)),Parallax:O(()=>B(()=>import("./Parallax-19fd7c2b.js"),[window.__assetsPath("assets/Parallax-19fd7c2b.js"),window.__assetsPath("assets/navigatorDetect-1d2a0641.js"),window.__assetsPath("assets/vuex.esm-bundler-f8eff60d.js"),window.__assetsPath("assets/_plugin-vue_export-helper-c27b6911.js"),window.__assetsPath("assets/MultiCarousel-20aec040.js"),window.__assetsPath("assets/BuyLookModal-74611642.js"),window.__assetsPath("assets/SizeSelector-9ba6e22f.js"),window.__assetsPath("assets/DropDown-a76f5e4a.js"),window.__assetsPath("assets/SizeList-92b44b6a.js"),window.__assetsPath("assets/Size-06c7d7fe.js"),window.__assetsPath("assets/defer-ac7afc4b.js"),window.__assetsPath("assets/usePriceFormat-08962b3d.js"),window.__assetsPath("assets/Modal-4b0c1909.js"),window.__assetsPath("assets/defer-106d1eb0.css"),window.__assetsPath("assets/SizeAttributes-6f38a124.js"),window.__assetsPath("assets/SizeAttributes-80546211.css"),window.__assetsPath("assets/state-0c727e5f.js"),window.__assetsPath("assets/useCustomerNotification-bad0d694.js"),window.__assetsPath("assets/marketplaceTypes-42317774.js"),window.__assetsPath("assets/Size-1d82f3ac.css"),window.__assetsPath("assets/Skeleton-fc79363e.js"),window.__assetsPath("assets/colorHasPriceRange-2401a3ab.js"),window.__assetsPath("assets/SizeList-2850bbb7.css"),window.__assetsPath("assets/productDetailLogic-e859225e.js"),window.__assetsPath("assets/formatString-a3c1eb18.js"),window.__assetsPath("assets/crossSellingTypes-8618da4f.js"),window.__assetsPath("assets/marketplace-0851b6dd.js"),window.__assetsPath("assets/productImage-e16b99b0.js"),window.__assetsPath("assets/shippingSelectTypes-2ba02b06.js"),window.__assetsPath("assets/strings-aba6b14c.js"),window.__assetsPath("assets/Spinner-4fecf309.js"),window.__assetsPath("assets/Spinner-6db6c11d.css")],import.meta.url)),CarouselCDP:O(()=>B(()=>import("./CarouselCDP-c99f7026.js"),[window.__assetsPath("assets/CarouselCDP-c99f7026.js"),window.__assetsPath("assets/vuex.esm-bundler-f8eff60d.js"),window.__assetsPath("assets/MultiCarousel-20aec040.js"),window.__assetsPath("assets/_plugin-vue_export-helper-c27b6911.js"),window.__assetsPath("assets/ProductPreview-b4d5116b.js"),window.__assetsPath("assets/navigatorDetect-1d2a0641.js"),window.__assetsPath("assets/useProductCompare-653ec34a.js"),window.__assetsPath("assets/marketplace-0851b6dd.js"),window.__assetsPath("assets/state-0c727e5f.js"),window.__assetsPath("assets/Brand-52056f66.js"),window.__assetsPath("assets/stockTypes-61b34c22.js"),window.__assetsPath("assets/imageImpolicyResolutionsTypes-92cbf4e7.js"),window.__assetsPath("assets/imageImpolicyResolutionsTypes-2575bb85.css"),window.__assetsPath("assets/colorHasPriceRange-2401a3ab.js"),window.__assetsPath("assets/BadgeGif-402a45b5.js"),window.__assetsPath("assets/useBadgeLink-a2b300bc.js"),window.__assetsPath("assets/BtnRedirectToPDP-c4077ba5.js"),window.__assetsPath("assets/defer-ac7afc4b.js"),window.__assetsPath("assets/usePriceFormat-08962b3d.js"),window.__assetsPath("assets/Modal-4b0c1909.js"),window.__assetsPath("assets/defer-106d1eb0.css"),window.__assetsPath("assets/useBadgeText-13c8b587.js"),window.__assetsPath("assets/Skeleton-fc79363e.js"),window.__assetsPath("assets/LongArrowRightIcon-1bd622b9.js"),window.__assetsPath("assets/throttle-5b801d35.js"),window.__assetsPath("assets/productImage-e16b99b0.js"),window.__assetsPath("assets/SizeGuideLink-1544103b.js"),window.__assetsPath("assets/debounce-0c3fcd84.js"),window.__assetsPath("assets/ProductPreview-d6880f4b.css")],import.meta.url)),ModalWithIframe:O(()=>B(()=>import("./ModalWithIframe-1892b939.js"),[window.__assetsPath("assets/ModalWithIframe-1892b939.js"),window.__assetsPath("assets/Modal-4b0c1909.js"),window.__assetsPath("assets/vuex.esm-bundler-f8eff60d.js"),window.__assetsPath("assets/_plugin-vue_export-helper-c27b6911.js"),window.__assetsPath("assets/Spinner-4fecf309.js"),window.__assetsPath("assets/Spinner-6db6c11d.css")],import.meta.url)),RetailMediaProduct:O(()=>B(()=>import("./RetailMediaProduct-79c40763.js"),[window.__assetsPath("assets/RetailMediaProduct-79c40763.js"),window.__assetsPath("assets/vuex.esm-bundler-f8eff60d.js"),window.__assetsPath("assets/ProductPreview-b4d5116b.js"),window.__assetsPath("assets/navigatorDetect-1d2a0641.js"),window.__assetsPath("assets/useProductCompare-653ec34a.js"),window.__assetsPath("assets/marketplace-0851b6dd.js"),window.__assetsPath("assets/state-0c727e5f.js"),window.__assetsPath("assets/Brand-52056f66.js"),window.__assetsPath("assets/_plugin-vue_export-helper-c27b6911.js"),window.__assetsPath("assets/stockTypes-61b34c22.js"),window.__assetsPath("assets/imageImpolicyResolutionsTypes-92cbf4e7.js"),window.__assetsPath("assets/imageImpolicyResolutionsTypes-2575bb85.css"),window.__assetsPath("assets/colorHasPriceRange-2401a3ab.js"),window.__assetsPath("assets/BadgeGif-402a45b5.js"),window.__assetsPath("assets/useBadgeLink-a2b300bc.js"),window.__assetsPath("assets/BtnRedirectToPDP-c4077ba5.js"),window.__assetsPath("assets/defer-ac7afc4b.js"),window.__assetsPath("assets/usePriceFormat-08962b3d.js"),window.__assetsPath("assets/Modal-4b0c1909.js"),window.__assetsPath("assets/defer-106d1eb0.css"),window.__assetsPath("assets/useBadgeText-13c8b587.js"),window.__assetsPath("assets/Skeleton-fc79363e.js"),window.__assetsPath("assets/LongArrowRightIcon-1bd622b9.js"),window.__assetsPath("assets/throttle-5b801d35.js"),window.__assetsPath("assets/productImage-e16b99b0.js"),window.__assetsPath("assets/SizeGuideLink-1544103b.js"),window.__assetsPath("assets/debounce-0c3fcd84.js"),window.__assetsPath("assets/ProductPreview-d6880f4b.css"),window.__assetsPath("assets/useMRCViewability-59cf18a4.js"),window.__assetsPath("assets/index-0ce33de9.js"),window.__assetsPath("assets/RetailMediaProduct-5055e1e5.css")],import.meta.url)),RetailMediaDisplay:O(()=>B(()=>import("./RetailMediaDisplay-3398dbce.js"),[window.__assetsPath("assets/RetailMediaDisplay-3398dbce.js"),window.__assetsPath("assets/vuex.esm-bundler-f8eff60d.js"),window.__assetsPath("assets/useMRCViewability-59cf18a4.js"),window.__assetsPath("assets/index-0ce33de9.js"),window.__assetsPath("assets/state-0c727e5f.js"),window.__assetsPath("assets/navigatorDetect-1d2a0641.js"),window.__assetsPath("assets/_plugin-vue_export-helper-c27b6911.js")],import.meta.url)),WineClub:O(()=>B(()=>import("./WineClub-d6adb355.js"),[window.__assetsPath("assets/WineClub-d6adb355.js"),window.__assetsPath("assets/vuex.esm-bundler-f8eff60d.js"),window.__assetsPath("assets/state-0c727e5f.js"),window.__assetsPath("assets/Skeleton-fc79363e.js"),window.__assetsPath("assets/_plugin-vue_export-helper-c27b6911.js")],import.meta.url)),Artwork:Fa},props:{placement:{type:Object,required:!0},containerClass:{type:[String,null],default:null},index:{type:Number,default:0},type:{type:[String,null],default:null,required:!1},inModal:{type:[Boolean,String],default:!1}},emits:["buyLookModalClosed","externalLinkClicked","placementCustomClicked"],setup(e,{emit:t}){const n="https://www.elcorteingles.es",{getRandomUuid:o}=Ha(),a="place-".concat(e.placement.trigger),r=o(),i=M([]),c=M(""),s=M(null),l=M([]),_=M([]),f=M([]),C=M(!1),g=M(!1),u=M(!1),k=M(void 0),A=J("page/getBaseUrl"),S=J("cart/isLogged"),w=Ta.isWineClub(e.placement),d=J("cart/getCartCallStatus"),h=J("cart/getShippingPrimeActivated"),m=J("page/isProd"),y=J("cart/getLoyaltyData"),P=De("page","setHasParallaxSheet"),R=De("page","getStock"),U=J("page/getLayoutOptions"),Y=(U==null?void 0:U.cdp_segments_autohide_enabled)||!0,V=M(null),H=M(null),N=M(null),K=M(null),W=M(null),x=["/tarjeta-regalo-fisica/empresas/"],Q=X(()=>I.loadRetailMediaData(e.placement,"display")),oe=X(()=>I.loadRetailMediaData(e.placement,"product_sponsor")),yt=X(()=>{const p=Mt();return p==="Parallax"&&P(!0),p}),gt=X(()=>!s.value||!i.value.length?null:i.value.filter(p=>p.id===s.value)[0]||null),wt=X(()=>{var p;return((p=I.getProducts(e.placement.id))==null?void 0:p.length)>0}),Ct=()=>{s.value=null,t("buyLookModalClosed")},kt=p=>{u.value=!0;const L={modal:1},E=p.url||p.link||p.button_url;k.value=de.addNewParamToQuery(E,L)},be=()=>{if(!l.value.length)return;const p=l.value.map(E=>E.data),L=ue.getProductIdsToCheckStock(p);if(L.length)return R({ids:L,type:"product"}).then(b=>{if(!b.success||!b.data)return console.error("[ProductList] Error fetching stock"),{products:{}};ue.setProductsStock(b.data,p),bt(b.data,p)}).catch(b=>{console.error(b)}),l.value.map(b=>{const T=b.data._datalayer[0].product;T.hierarchy=b.data.hierarchy,T.category=b.data.categories.map(Ot=>Ot.name);const $=Pe(T);return b.data.product_store_datalayer=$,$})},bt=(p,L)=>{const E=ue.getAllGiftReferencesFromStock(p);E.length&&R({ids:E,type:"gifts"}).then(b=>{ue.setProductPromosWithStock(L,p,b.data)})};Le(d,p=>{p===Ee.STATUS.LOADED&&I.handleFunctionalSegmentsCompositions(e.placement.compositions,S.value,h.value)}),Le(y,p=>{p!==null&&I.handleMrcaSegmentsCompositions(e.placement.compositions,p,S.value)});const St=()=>{I.loadVideoController(),i.value=I.loadBuyLookData(e.placement,r,qt()),l.value=I.initSimpleProductData(e.placement,r),_.value=I.getVueArtworks(e.placement),l.value.length&&(f.value=be(l.value)),Y&&I.removeHiddenByCDPSegments(e.placement.compositions),(oe.value.length||Q.value.length)&&(c.value="height: 100%; width: 100%;"),d.value===Ee.STATUS.LOADED&&I.handleFunctionalSegmentsCompositions(e.placement.compositions,S.value,h.value),y.value!==null&&I.handleMrcaSegmentsCompositions(e.placement.compositions,y.value,S.value);const p=I.getArtworksWithLinkThatOpensOnModal(e.placement);p!=null&&p.length&&Pt(p);const L=I.getArtworksWithLinks(e.placement);L!=null&&L.length&&L.forEach(E=>{E.href=Lt(E.href),E.addEventListener("click",()=>{t("externalLinkClicked",a)})}),C.value=!0},Lt=p=>{const L=de.getURLWithoutDomainAndParams(p);return x.includes(L)?de.addNewParamToQuery(p,{vuestore:1}):p},Se=X(()=>{var p,L;return C.value?(Et(),((L=(p=e.placement)==null?void 0:p.html)==null?void 0:L.indexOf("js-custom-carousel"))!==-1):!1}),Pt=p=>{p.forEach(L=>{const E=document.getElementById(L.id);E==null||E.addEventListener("click",b=>{var $;b.preventDefault(),u.value=!0;const T={modal:1};k.value=de.addNewParamToQuery(($=L.link)!=null?$:L.href,T),m.value||(k.value=k.value.replace(n,A.value))})})},Et=()=>{let p=Pe(f.value);if(!p.length)return;const L=document.querySelectorAll(".composition.hidden .composition-container, .composition-container.hidden"),E=[];if(L.forEach(b=>{b.id&&/compo-/.test(b.id)&&E.push(b.id.replace(/compo-/,""))}),E.length){const b=At(e.placement.compositions,E);p=p.filter(T=>!b.includes(T.id)&&!b.includes(T.code_a))}we.sendProductModulesPushInitial(p)},At=(p,L)=>{const E=[];return p.forEach(b=>{L.includes(b.id)&&b.hasProductStore&&b.artworks&&b.artworks.length&&b.artworks.map(T=>{T.map($=>{$.artwork.type==="product_store"&&E.push($.artwork.settings.product_id)})})}),E},Dt=(p,L,E)=>{V.value=p,W.value=E,N.value=L},xt=()=>{Se.value&&Vo(["placements","compositions","cdp"],"displayCdpProductsCarousel",Dt)},Mt=()=>w?Ve.wineClub:Ve[e.placement.sheet_type],It=()=>{u.value=!1},Rt=()=>{t("placementCustomClicked",e.placement.customClickEventName)};return Ft(()=>{e.inModal?I.loadVideoController(e.inModal):(St(),xt())}),{placementId:a,uuid:r,buyLookData:i,activeBuyLookId:s,productsFromPlacement:l,vueArtworks:_,isMounted:C,isLogged:S,cartStatus:d,hasShippingPrimeActivated:h,loyaltyData:y,vuePlacement:yt,activeBuyLook:gt,hasProducts:wt,getProductsStock:be,handleBuyLookClose:Ct,isCdpCarousel:Se,maxProducts:V,products:H,categoryId:N,eciLover:K,segEciLover:W,showCarousel:g,showLinkOnModal:u,linkOnModal:k,closeModal:It,placementCustomStyle:c,displayRetailMediaData:Q,productRetailMediaData:oe,placementCustomClicked:Rt,openInModal:kt}}},za=["id"],Ja=["innerHTML"],Ga=["innerHTML"],Ya={class:"artwork-toolbar disabled"},Ka=["sitemanager-data"];function Qa(e,t,n,o,a,r){var g;const i=z("BuyLookModal"),c=z("CarouselCDP"),s=z("ProductPreview"),l=z("Artwork"),_=z("ModalWithIframe"),f=z("RetailMediaProduct"),C=z("RetailMediaDisplay");return D(),q("div",{id:o.placementId,class:Nt([n.containerClass]),style:$t(o.placementCustomStyle)},[o.vuePlacement?(D(),F(je(o.vuePlacement),{key:0,placement:n.placement},null,8,["placement"])):n.placement.customClickEventName?(D(),q("div",{key:1,class:"custom_click_placement",onClick:t[0]||(t[0]=Ut((...u)=>o.placementCustomClicked&&o.placementCustomClicked(...u),["stop"])),innerHTML:n.placement.html},null,8,Ja)):(D(),q("div",{key:2,innerHTML:n.placement.html},null,8,Ga)),(g=o.buyLookData)!=null&&g.length?(D(),F(i,{key:3,ref:"buyLookModal",look:o.activeBuyLook,onIsclosed:o.handleBuyLookClose},null,8,["look","onIsclosed"])):Z("",!0),o.isMounted?(D(),q(ae,{key:4},[o.isCdpCarousel&&o.isLogged?(D(),F(ee,{key:0,to:"#js-custom-carousel",disabled:!o.isMounted},[Vt(re(c,{"max-products":o.maxProducts,"category-id":o.categoryId,"seg-eci-lover":o.segEciLover,onHideCarousel:t[1]||(t[1]=u=>o.showCarousel=!1),onShowCarousel:t[2]||(t[2]=u=>o.showCarousel=!0)},null,8,["max-products","category-id","seg-eci-lover"]),[[jt,o.showCarousel]])],8,["disabled"])):Z("",!0),(D(!0),q(ae,null,le(o.productsFromPlacement,(u,k)=>(D(),F(ee,{key:u.id,to:"#"+u.id,disabled:!o.isMounted},[Ae("div",Ya,[Ae("span",{"sitemanager-data":u.site_manager},null,8,Ka)]),(D(),F(s,{key:"product_preview_".concat(u.id,"-").concat(k,"-").concat(o.uuid),"force-show-brand":!0,"is-product-store":!0,position:k+1,product:u.data},null,8,["position","product"]))],8,["to","disabled"]))),128)),(D(!0),q(ae,null,le(o.vueArtworks,u=>(D(),F(ee,{key:u.id,to:"#artwork-"+u.id},[re(l,{artwork:u,type:u.type,onOpenInModal:k=>o.openInModal(u.settings)},null,8,["artwork","type","onOpenInModal"])],8,["to"]))),128)),o.showLinkOnModal?(D(),F(ee,{key:1,to:"#Layout-modal-iframe"},[re(_,{iframeURL:o.linkOnModal,showFooter:!1,spanHeaderLayer:"",onCloseModal:o.closeModal},null,8,["iframeURL","onCloseModal"])])):Z("",!0),o.productRetailMediaData&&o.productRetailMediaData.length?(D(!0),q(ae,{key:2},le(o.productRetailMediaData,u=>(D(),F(ee,{key:"product_sponsor-".concat(n.placement.trigger,"-").concat(u.composition_id,"-").concat(u.id),to:"#product_sponsor-".concat(n.placement.trigger,"-").concat(u.composition_id,"-").concat(u.id)},[re(f,{id:"product_sponsor-".concat(n.placement.trigger,"-").concat(u.composition_id,"-").concat(u.id),trigger:n.placement.trigger,position:n.index+1,placement:u,product:u},null,8,["id","trigger","position","placement","product"])],8,["to"]))),128)):Z("",!0),o.displayRetailMediaData&&o.displayRetailMediaData.length?(D(!0),q(ae,{key:3},le(o.displayRetailMediaData,u=>(D(),F(ee,{key:"display_sponsor-".concat(n.placement.trigger,"-").concat(u.composition_id,"-").concat(u.id),to:"#display_sponsor-".concat(n.placement.trigger,"-").concat(u.composition_id,"-").concat(u.id)},[re(C,{id:"display_sponsor-".concat(n.placement.trigger,"-").concat(u.composition_id,"-").concat(u.id),placement:u,"slot-desktop":u.settings.slot_desktop,"slot-mobile":u.settings.slot_mobile},null,8,["id","placement","slot-desktop","slot-mobile"])],8,["to"]))),128)):Z("",!0)],64)):Z("",!0)],14,za)}const Xa=Ht(Wa,[["render",Qa],["__scopeId","data-v-3f71b21d"]]),or=Object.freeze(Object.defineProperty({__proto__:null,default:Xa},Symbol.toStringTag,{value:"Module"}));export{or as R,Xa as S,B as _,Ko as a,we as b,on as c,Jt as d,Vo as e,Ha as f,ia as g,ja as h,Yt as i,I as p,Ho as r,an as s,Kt as u,nr as v,Ta as w};
//# sourceMappingURL=Render-4448ec15.js.map
