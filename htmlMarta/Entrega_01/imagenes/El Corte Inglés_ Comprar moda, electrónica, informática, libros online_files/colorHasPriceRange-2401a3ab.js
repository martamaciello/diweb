import{Q as A,z as _,I as C,h as q,as as y,aI as B}from"./vuex.esm-bundler-f8eff60d.js";const V=["agrupation"];function oe(e){const{stockPromos:t,variantPromos:r,currentColorPromos:n,skuPromoBadge:i,stockAllPromos:s}=e,a=[...[r,n,i].flatMap(o=>o||[]).filter(Boolean)];return t&&P(t,a),s&&P(s,a),a.sort((o,g)=>o.priority-g.priority)}function ue(e){const t=F(e),r=M(e);return t||r}function ce(e,t){return e.isSPO&&t.isSPO?e.id===t.id&&e.colorVariantId===t.colorVariantId:e.id===t.id}function ae(e,t){if(!(!e||!t||!e.promos||!Array.isArray(t)))return t.map(r=>N(e,r))}function fe(e,t,r){return e.sizeOvered?G(e.sizeOvered,r):L(e.product,t)}function le(e,t){return e.sizeOvered?e.sizeOvered.principal_agrupation:z(e.product,t)}const N=(e,t)=>{if(!e||!t||!e.promos||!Array.isArray(t.promotional_actions)||!t.promotional_actions.length)return;e.promos[t.id]?e.promos[t.id]=[...e.promos[t.id],...t.promotional_actions]:e.promos[t.id]=t.promotional_actions,e.promos[t.id]=E(e.promos[t.id]);const r=W(t.promotional_actions);r&&(e.principalGifs[t.id]=r);const n=R(t.promotional_actions);n&&(t.principal_agrupation=n)},R=e=>{if(!Array.isArray(e)||!e.length)return;const r=e.filter(o=>o.make_up&&Object.keys(o.make_up).length&&V.includes(o.type)).sort((o,g)=>o.priority-g.priority).find(o=>o.make_up.promo_text_list_agrupation||o.make_up.promo_text_detail_agrupation||o.make_up.promo_text_agrupation);if(!r)return;const{identifier:n,isSPO:i,make_up:s,priority:u,target_references:a}=r;return[{description:s.promo_text_detail_agrupation,endDate:s.end_date_time,gif:s.promo_gif_agrupation,id:n,isSPO:i,priority:u,startDate:s.start_date_time,target_references:a,text:s.promo_text_agrupation,title:s.promo_text_list_agrupation,urlPromo:s.promo_url_agrupation}]},W=e=>{if(!Array.isArray(e))return;const t=e.sort((n,i)=>n.priority-i.priority).find(n=>n.gifs_free_text);if(!(!t||!t.gifs_free_text.match(/\.(png|jpg|gif|svg|woff|woff2|eot|ttf)$/)))return{key:"custom",description:"",type:"url_img",url:t.gifs_free_text,promo_id:t.id,is_product_promo:!!t.products,promo_url_badge_image_pdp:t.promo_url_badge_image_pdp,promo_url_badge_image_plp:t.promo_url_badge_image_plp,isSPO:t.isSPO,promo_url_badge_image_pdp_windows_type:t.make_uppromo_url_badge_image_pdp_windows_type,promo_url_badge_image_plp_windows_type:t.make_uppromo_url_badge_image_plp_windows_type}},E=e=>e.sort((t,r)=>t.priority-r.priority),F=e=>{if(!Array.isArray(e)||!e.length)return!1;const t=new Set;for(const r of e)if(A.hasAvailableStatus(r.status)){const n=r.sku_promo_badge;t.add(n==null?void 0:n.id)}return t.size>1},M=e=>{if(!Array.isArray(e)||!e.length)return!1;const t=new Set;for(const r of e)if(A.hasAvailableStatus(r.status)){const n=r.principal_gif;t.add(n==null?void 0:n.id)}return t.size>1};function G(e,t){var n;const r=e==null?void 0:e.all_promos;return Array.isArray(r)?(n=r.filter(i=>{var s;return(s=i.target_references)!=null&&s.length?i.target_references.some(u=>{const a=u.includes(":")?u.split(":")[0]:u;return t.value.includes(a)}):!0}))!=null?n:[]:[]}function L(e,t){var n,i,s;const r=(n=e.principal_promo)==null?void 0:n.filter(u=>u.title_list);return Array.isArray(r)&&r.length&&!((i=r[0])!=null&&i.isSPO)?e.principal_promo:(s=t.value)==null?void 0:s.principalPromosColorVariant}function z(e,t){var r;return e.principal_agrupation||((r=t.value)==null?void 0:r.principalPromoAgrupationColorVariant)}function P(e,t){e.forEach(r=>{const n=t.findIndex(i=>i.id===r.id);n!==-1?t[n]=r:t.push(r)})}const _e=e=>{const t=_(!1),r=_(0),n=_(0),i=_(0),s=_(0),u=_(0),a=_(0),o=_(null);C(e,c=>{if(!c){o.value&&o.value.disconnect();return}b(c),o.value||(o.value=new ResizeObserver(g),o.value.observe(e.value))});const g=c=>{for(const f of c){const{target:l}=f;b(l)}},b=c=>{r.value=c.offsetWidth,n.value=c.scrollWidth,t.value=Math.abs(r.value-n.value)>2,s.value=c.children.length,u.value=x(c),a.value=D(r.value,u.value,8,.25),i.value=t.value?r.value/u.value:s.value},x=c=>Array.from(c.children).reduce((f,l)=>{const d=l.offsetWidth;return d>f?d:f},0),D=(c,f,l,d)=>{const p=c/(f+l),O=f+l,T=f*d,I=f-T,j=T+l,h=p%1*O;let v=0;h<d*100?v=-1:h>I&&(v=1);const w=v<0?j+h:h-I;if(v!==0){const U=v>0?Math.floor(p):Math.floor(p-1);return l+Math.ceil(w/U)}else return l},S=q(()=>"".concat(u.value,"px"));return{isOverflowing:t,visibleWidth:r,totalWidth:n,visibleItems:i,totalItems:s,itemWidth:u,itemsGap:a,itemCssWidth:S}},H=y(B),$=H;let k;const m=e=>{$.post(k,e)};function K(e){k=e}function Q(e){var i;if(!e.index)return;const t=20,r=[];for(;(i=e.objectIDs)!=null&&i.length;)r.push({eventType:"view",eventName:"Products Viewed",index:e.index,objectIDs:e.objectIDs.splice(0,t),userToken:e.userToken,authenticatedUserToken:e.authenticatedUserToken});m({events:r})}function Y(e){var i;if(!e.index)return;const t=10,r=[];for(;(i=e.filters)!=null&&i.length;)r.push({eventType:"view",eventName:"Viewed Filters",index:e.index,filters:e.filters.splice(0,t),userToken:e.userToken,authenticatedUserToken:e.authenticatedUserToken});m({events:r})}function J(e){if(!(e!=null&&e.queryID)||!e.index)return;const t={events:[{eventType:"click",eventName:"Products Clicked After Search",index:e.index,queryID:e.queryID,objectIDs:e.objectIDs,positions:e.positions,userToken:e.userToken,authenticatedUserToken:e.authenticatedUserToken}]};m(t)}function X(e){if(!(e!=null&&e.queryID)||!e.index)return;const t={events:[{eventType:"conversion",eventSubtype:"addToCart",eventName:"Products Added to Cart After Search",index:e.index,queryID:e.queryID,objectIDs:e.objectIDs,objectData:e.objectData,value:parseFloat(e.value.toFixed(2)),currency:e.currency,userToken:e.userToken,authenticatedUserToken:e.authenticatedUserToken}]};m(t)}function Z(e){if(!(e!=null&&e.index))return;const t={events:[{eventType:"click",eventName:"Clicked Filters",index:e.index,filters:e.filters,userToken:e.userToken,authenticatedUserToken:e.authenticatedUserToken}]};m(t)}function ee(e){if(!(e!=null&&e.index))return;const t={events:[{eventType:"conversion",eventName:"Filters Converted",index:e.index,filters:e.filters,userToken:e.userToken,authenticatedUserToken:e.authenticatedUserToken}]};m(t)}function te(e){const t={events:[{eventType:"conversion",eventSubtype:"purchase",eventName:"Products Purchased After Search",index:e.index,queryID:e.queryID,objectIDs:e.objectIDs,objectData:e.objectData,value:e.value,currency:e.currency,userToken:e.userToken,authenticatedUserToken:e.authenticatedUserToken}]};m(t)}function re(e){if(!(e!=null&&e.queryID)||!e.index)return;const t={events:[{eventType:"conversion",eventName:"Items Converted After Search",index:e.index,queryID:e.queryID,objectIDs:e.objectIDs,userToken:e.userToken,authenticatedUserToken:e.authenticatedUserToken}]};m(t)}function ne(e,t,r,n){return e.search_engine={identifier:"algolia",field:{query:t},indexable_name:r,object_id:n},e}var me={sendViewedObjectsId:Q,sendViewedFilters:Y,sendClickedObjectIDsAfterSearch:J,sendAddedToCartObjectIDsAfterSearch:X,sendClickedFilters:Z,sendConvertedFilters:ee,sendPurchaseAfterSearch:te,sendConvertedObjectIdsAfterSearch:re,initAlgoliaEventsUrl:K,setProductDataLayerData:ne};const ge=(e,t)=>{var n;if(t)return!0;if(!e||!Array.isArray(e)||!e.length)return!1;const r=new Set;for(const i of e)if(i.available){const s=(n=i.sale_price)!=null?n:i.price;r.add(s)}return r.size>1};export{me as a,fe as b,ge as c,ue as d,ce as e,oe as f,le as g,ae as m,H as r,_e as u};
//# sourceMappingURL=colorHasPriceRange-2401a3ab.js.map
